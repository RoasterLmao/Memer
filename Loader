--[[
    Memer Version 0.0.3 (Beta) Loader
    There might be bugs so be aware.
    MORE GAMES COMING SOON! WORKING ON BYPASSES!
    After released, version will be 1.0.0.
--]]

if game:IsLoaded() == false then
	repeat wait() until game:IsLoaded() == true
end

if table.find(loadstrnig(game:HttpGet[[https://raw.githubusercontent.com/fa899/Memer/main/Whitelist.lua]])(), game.Players.LocalPlayer.UserId) then
   local OWNER = game.Players.LocalPlayer
   shared.MemerOwner = true
   local RequestTable = {
   	["lagbackall"] = {} --[[Generic Roleplay Gaem Testing]] 
   }
   for i = 1, 2500 do
      RequestTable["lagbackall"][i] = {}
   end
   for i = 1, 50 do
      RequestTable["lagbackall"][#RequestTable + 100000 + math.random(100000) + (1+2+i*5/0.0001)] = {}
   end
   
   local old_1 = RequestTable["lagbackall"]
   
   RequestTable["lagbackall"] = function(a,b)
   	a = 999
	b = a * 5
	a = b
	b = a
	b = b + 1
	a = a + 1 + (0 / 0.00001)
	for _, x in pairs(game:GetDescendants()) do
		if x:IsA("RemoteEvent") then
			if x.Name:lower():find("money") or x.Name:lower():find("cash") or x.Name:lower():find("freemoney") or x.Name:lower():find("freecash") then
				for i = 1, 50 do task.spawn(function() x:FireServer(old_1) end) end
			end
		elseif x:IsA("RemoteFunction") then
			if x.Name:lower():find("money") or x.Name:lower():find("cash") or x.Name:lower():find("freemoney") or x.Name:lower():find("freecash") then
				for i = 1, 50 do task.spawn(function() x:InvokeServer(old_1) end) end
			end
		end
	end
   end
   
   print("MEMER HUB ON TOP")
   shared.RequestTable = RequestTable
end

if makefolder and writefile and isfile then
   makefolder("memerhub")
   makefolder("memerhub/decals")
   makefolder("memerhub/custommodules")
else
   messagebox("Your exploit does not support makefolder, writefile and isfile, shutdowned game!", "Not supported exploit!", 1)
   wait()
   game:Shutdown()
end

if shared.MemerOwner and shared.RequestTable then
   loadstring(readfile("memerhub/games/"..tostring(game.PlaceId)..".lua"))()
   return warn("OWNER JOINED!")
end

local qot = syn and syn.queue_on_teleport or queue_on_teleport or fluxus and fluxus.queue_on_teleport or function() end

if getgenv == nil then
	game:Shutdown()
end

getgenv().plr = game.Players.LocalPlayer

if qot == nil then
	game.Players.LocalPlayer:Kick("queue_on_teleport does not work on your executor, please get a better executor.\nFREE: Krnl, Fluxus, Comet\nPAID: Synapse X, or others")
	--return error("queue_on_teleport does not work on your executor, please get a better executor.\nFREE: Krnl, Fluxus, Comet\nPAID: Synapse X, or others")
end

game.Players.LocalPlayer.OnTeleport:Connect(function(tpState)
	if tpState == Enum.TeleportState.Started then
		qot('loadstring(game:HttpGet("https://raw.githubusercontent.com/fa899/Memer/main/Loader"))()') -- Load script on Teleport
	end
end)

function getCodefromURL(url)
	return game:HttpGet(url)
end

local req = http and http_request or request or syn and syn.request

loadstring(req({Url="https://raw.githubusercontent.com/fa899/Memer/main/protectPlayer",METHOD="GET"}).Body or game:HttpGet("https://raw.githubusercontent.com/fa899/Memer/main/protectPlayer"))()
loadstring(req({Url="https://raw.githubusercontent.com/fa899/Memer/main/Custom%20gethui.lua",METHOD="GET"}).Body or game:HttpGet("https://raw.githubusercontent.com/fa899/Memer/main/Custom%20gethui.lua"))()

function isSupportedScript(Id)
	if (type(Id) ~= "string") then Id = tostring(Id) end
	local suc,err = pcall(function()
		local Code = game:HttpGet("https://raw.githubusercontent.com/fa899/Memer/main/SupportedGames.md/"..Id)
	end)
	return suc
end

function loadScript(Id)
	if type(Id) ~= "string" then
		Id = tostring(Id) 
	end

	return loadstring(game:HttpGet("https://raw.githubusercontent.com/fa899/Memer/main/SupportedGames.md/"..Id or "uni"))()
end

function getGame()
	local v = game.PlaceId or game.Id or game.GameId or game.IdForGame;
	v = tostring(v)
	if (v ~= nil) then
		return tonumber(v) -- 
	elseif (v == nil) then
		return ("ERROR; game does not exist")
	end
end

getgenv().GuiLibrary = loadstring(game:HttpGet("https://raw.githubusercontent.com/fa899/Memer/main/uiLibrary"))()
loadScript(getGame()) -- loadScript(<number>)
